# Claude Code Playbook

## Методология управления проектом через AI-агентов

Этот документ — готовый шаблон для запуска любого нового проекта в Claude Code. Содержит все процессы, шаблоны и правила, проверенные на практике. Просто вставь в новый проект и адаптируй под свой продукт.

---

## Оглавление

1. [Что создать и в каком порядке](#1-что-создать-и-в-каком-порядке)
2. [CLAUDE.md — главный управляющий документ](#2-claudemd)
3. [TEAM.md — команда специалистов](#3-teammd)
4. [Протокол формализации задач](#4-протокол-формализации-задач)
5. [DEVLOG.md — журнал разработки](#5-devlogmd)
6. [CREDENTIALS.md — хранилище доступов](#6-credentialsmd)
7. [ROADMAP.md — план по спринтам](#7-roadmapmd)
8. [USER_PERSONAS.md — тестовая группа](#8-user_personasmd)
9. [Чеклисты спринтов](#9-чеклисты-спринтов)
10. [Правила разработки](#10-правила-разработки)

---

## 1. Что создать и в каком порядке

Когда начинаешь работать с новым проектом в Claude Code, создавай документы в этом порядке:

| # | Документ | Зачем | Кто создаёт |
|---|---------|-------|-------------|
| 1 | `CLAUDE.md` | Главный документ. Загружается автоматически. Все правила здесь | Первым делом |
| 2 | `TEAM.md` | Команда специалистов — кто и за что отвечает | Сразу после CLAUDE.md |
| 3 | `CREDENTIALS.md` | Все пароли, ключи, доступы (НЕ в git) | При первой настройке |
| 4 | `DEVLOG.md` | Журнал всех рабочих сессий | При первой сессии |
| 5 | `ROADMAP.md` | План спринтов и этапов | После определения архитектуры |
| 6 | `USER_PERSONAS.md` | Тестовая группа пользователей | Перед началом разработки |

**Важно:** `CLAUDE.md` загружается в контекст Claude автоматически при каждом запуске. Все остальные файлы агент читает по необходимости. Поэтому в CLAUDE.md указывается таблица: какой файл когда читать.

---

## 2. CLAUDE.md

Это самый важный файл. Он задаёт ВСЕ правила работы. Вот шаблон:

```markdown
# CLAUDE.md — [НАЗВАНИЕ ПРОЕКТА]

## Проект

**Название:** [название]
**Тип:** [тип продукта]
**Описание:** [1-2 предложения — что делает продукт]

---

## Документация проекта

| Файл | Назначение | Когда читать |
|------|-----------|--------------|
| `CLAUDE.md` | Главный управляющий документ | Всегда (загружается автоматически) |
| `TEAM.md` | Команда специалистов | При запуске любого агента |
| `CREDENTIALS.md` | Все доступы (НЕ в git) | При деплое, интеграциях |
| `DEVLOG.md` | Журнал сессий | В начале сессии (прочитать последнюю запись) |
| `ROADMAP.md` | План спринтов | При планировании работы |
| `USER_PERSONAS.md` | Тестовая группа | При UX-решениях |

---

## ПРОТОКОЛ ФОРМАЛИЗАЦИИ ЗАДАЧ

[Вставить секцию из раздела 4 этого playbook]

---

## ПРИНЦИП РАБОТЫ С АГЕНТАМИ

[Вставить секцию из раздела 2.1 ниже]

---

## ЖУРНАЛ РАЗРАБОТКИ (DEVLOG)

[Вставить секцию из раздела 5 этого playbook]

---

## ПОЛИТИКА CREDENTIALS

[Вставить секцию из раздела 6 этого playbook]

---

## СТЕК ТЕХНОЛОГИЙ

| Слой | Технология | Статус |
|------|-----------|--------|
| [заполнить под проект] | | Закреплён |

---

## СТРУКТУРА ПРОЕКТА

[дерево каталогов проекта]

---

## ПРАВИЛА РАЗРАБОТКИ

[Вставить секцию из раздела 10 этого playbook]
```

### 2.1 Блок «Принцип работы с агентами» (вставить в CLAUDE.md)

```markdown
## ПРИНЦИП РАБОТЫ С АГЕНТАМИ

Это фундаментальное правило проекта. Нарушение недопустимо.

### Правило 1: Любая задача = агент из команды

При выполнении ЛЮБОЙ работы — код, баги, дизайн, тесты, деплой,
исследование, планирование — запускается агент, который принимает роль
одного из специалистов команды из TEAM.md.

Агент обязан:
1. Прочитать TEAM.md и принять роль конкретного специалиста
2. Прочитать релевантные файлы документации
3. Работать в рамках знаний и зоны ответственности специалиста
4. Обеспечить quality level, соответствующий 15+ годам опыта

### Правило 2: Только специалисты из TEAM.md

Агент НИКОГДА не может быть «абстрактным помощником».
Это ВСЕГДА один из специалистов из TEAM.md.

### Правило 3: Новый специалист — только по стандарту

Если задача не закрывается ни одной из ролей, допускается создание
нового специалиста. Но:
1. По тому же стандарту (роль, грейд 15+, зона ответственности,
   инструменты, глубинные знания)
2. Добавляется в TEAM.md
3. Решение принимает Engineering Manager совместно с Product Architect
4. Причина фиксируется

### Правило 4: Формат вызова агента

При запуске агента указывать:
- Роль: #N — [Название роли]
- Контекст: [какие файлы читать]
- Задача: [конкретная задача]

### Правило 5: Совместная работа агентов

Некоторые задачи требуют нескольких специалистов.
Агенты запускаются параллельно.

Примеры:
- Новый модуль: #1 (PRD) → #2 (дизайн) → #5 (backend) + #3 (frontend) → #7 (тесты)
- Баг: #5 (диагностика) + #7 (тесты) + #6 (логи)
- Деплой: #6 (деплой) + #7 (smoke-тесты) + #8 (координация)
```

---

## 3. TEAM.md

### Принцип формирования

Каждый специалист — **Senior+ / Principal уровень с 15+ годами опыта**. Не абстрактные роли, а конкретные эксперты с глубинными знаниями.

### Шаблон TEAM.md

```markdown
# DREAM TEAM — [НАЗВАНИЕ ПРОЕКТА]

## [Описание проекта]

**Версия:** 1.0

---

## Принцип формирования

Каждый специалист — Senior+ уровень с 15+ годами опыта.
Это не просто исполнители — это архитекторы решений.

---

## Состав команды: [N] специалистов

---

### #1 — PRODUCT ARCHITECT
**Грейд:** Principal (18+ лет)
**Зона ответственности в проекте:** [конкретно что делает в ЭТОМ проекте]

#### Инструменты и глубинные знания

| Область | Инструменты | Глубинные знания |
|---------|------------|------------------|
| Продуктовая стратегия | PRD, CJM, JTBD | [конкретные знания] |
| Исследования | Competitor Analysis, User Interviews | [конкретные знания] |
| Аналитика | Metrics, A/B Testing | [конкретные знания] |

---

### #2 — PRINCIPAL UX/UI ENGINEER
[по тому же шаблону]

---

### #3 — [РОЛЬ ПОД ПРОЕКТ]
[по тому же шаблону]

---

[продолжить для всех специалистов]
```

### Базовый набор ролей (адаптируй под проект)

| # | Роль | Когда вызывать | Обязательность |
|---|------|---------------|----------------|
| 1 | Product Architect | Продуктовые решения, приоритизация, PRD, исследования | Всегда |
| 2 | Principal UX/UI Engineer | Дизайн, user flow, wireframes, дизайн-система | Всегда |
| 3 | Senior Staff Frontend Engineer | Веб-приложения, SPA/SSR, интеграция API | Если есть веб |
| 4 | Senior Staff Mobile Engineer | Мобильное приложение, push, deep linking | Если есть мобилка |
| 5 | Principal Backend Engineer | API, БД, бизнес-логика, интеграции | Всегда |
| 6 | Staff SRE / Platform Engineer | Docker, CI/CD, мониторинг, деплой | Всегда |
| 7 | Principal QA Engineer | Тесты, тест-кейсы, автотесты, баг-репорты | Всегда |
| 8 | Engineering Manager | Планирование, координация, риски, релизы | Всегда |

**Минимум: 5 ролей** (#1, #5, #6, #7, #8). Остальные — по потребности проекта.

### Как добавлять специалистов

Когда появляется задача, которую не закрывает ни одна роль:

1. #8 EM + #1 PA принимают решение
2. Новый специалист создаётся по стандарту TEAM.md
3. Добавляется как #N+1
4. Причина фиксируется

Примеры дополнительных ролей:
- #9 Principal UX Research Lead — если нужны исследования, персоны, интервью
- #10 Data Engineer — если появляется ETL/analytics
- #11 Security Engineer — если нужен пентест или compliance
- #12 Technical Writer — если нужна документация для пользователей

---

## 4. Протокол формализации задач

### Суть

Каждый запрос пользователя преобразуется в техническую спецификацию (ТС) перед выполнением. Это предотвращает scope creep и обеспечивает качество.

### Вставить в CLAUDE.md

```markdown
## ПРОТОКОЛ ФОРМАЛИЗАЦИИ ЗАДАЧ

### Пайплайн обработки задачи

1. КЛАССИФИКАЦИЯ — определить домен, сложность (S/M/L/XL), специалиста
2. ФОРМАЛИЗАЦИЯ — специалист преобразует запрос в ТС
3. ИСПОЛНЕНИЕ — работа строго по ТС
4. ВЕРИФИКАЦИЯ — результат проверяется по критериям из ТС

### Маршрутизация по доменам

| Домен задачи | Кто формализует |
|-------------|----------------|
| Продукт, фичи, исследования | #1 Product Architect |
| UX/UI, дизайн, flow | #2 Principal UX/UI |
| Frontend веб | #3 Senior Staff Frontend |
| Мобильное приложение | #4 Senior Staff Mobile |
| Backend, API, БД | #5 Principal Backend |
| Инфраструктура, деплой | #6 Staff SRE |
| Тестирование, QA | #7 Principal QA |
| Планирование, процессы | #8 Engineering Manager |
| Кросс-домен (2+ области) | #8 EM (координация) |

### Шаблон ТС (полный — для задач M/L/XL)

| Поле | Содержание |
|------|-----------|
| ID | TASK-NNN |
| Название | Краткое название задачи |
| Домен | backend / frontend / mobile / infra / product / design |
| Размер | S / M / L / XL |
| Специалист-исполнитель | #N — Роль |
| Контекст | Какие файлы прочитать перед работой |
| Задача | Что конкретно сделать |
| Критерии готовности | Как понять, что задача выполнена |
| Ограничения | Чего НЕ делать, что не менять |
| Зависимости | От каких задач зависит / что блокирует |

### Шаблон ТС (лёгкий — для задач S)

| Поле | Содержание |
|------|-----------|
| Задача | Что сделать (1 предложение) |
| Исполнитель | #N |
| Готовность | Как проверить |

### Edge Cases

1. **Тривиальная задача (опечатка, 1 строка)** — формализация не нужна,
   но исполнитель всё равно определяется
2. **Пользователь дал готовую спецификацию** — принять как ТС,
   дополнить если нужно
3. **Хотфикс (продакшен горит)** — исполнение немедленно,
   ТС пишется постфактум
4. **Исследовательская задача** — ТС описывает вопросы,
   а не результат
5. **Кросс-доменная задача** — #8 EM разбивает на подзадачи
   по доменам
```

---

## 5. DEVLOG.md

### Суть

Журнал разработки — «бортовой журнал» проекта. Каждая рабочая сессия фиксируется. Новые записи сверху. Каждая запись сканируется за 10 секунд.

### Шаблон DEVLOG.md

```markdown
# DEVLOG — [НАЗВАНИЕ ПРОЕКТА]

## Журнал разработки (Development Log)

Хронологический лог всех рабочих сессий.
Обновляется в конце каждой сессии. Записи — от новых к старым.

**Формат записи:** коротко, только суть. Каждая запись
сканируется за 10 секунд.

---

## Шаблон записи

### [SNNN] — ГГГГ-ММ-ДД — Краткий заголовок

**Роли:** #N Роль, #N Роль
**Статус:** завершено | частично | заблокировано

**Что сделано:**
- Пункт 1
- Пункт 2

**Ключевые решения:**
- Решение и причина

**Артефакты:** `файл1.md`, `файл2.ts` (новые/изменённые)

**Следующие шаги:**
- Что делать дальше

---

## Записи

---

[записи добавляются здесь, новые сверху]
```

### Правила ведения (вставить в CLAUDE.md)

```markdown
## ЖУРНАЛ РАЗРАБОТКИ (DEVLOG)

### Обязательные правила

1. **Каждая сессия** завершается записью в DEVLOG.md
2. **Маркер:** в конце каждого ответа агента — строка
   `> DEVLOG updated: SNNN`
3. **Новые записи — сверху** (newest-first)
4. **Максимум 15 строк** на запись (только суть)
5. **Ответственный:** каждый работающий агент обязан обновить лог
6. **Владелец процесса:** #8 Engineering Manager
7. **Нумерация:** сквозная (S001, S002, ..., S999)

### Что фиксировать

- Что конкретно было сделано
- Какие решения приняты и почему
- Какие файлы созданы/изменены
- Что делать дальше (следующие шаги)
- Если что-то заблокировано — почему

### Чего НЕ фиксировать

- Промежуточные рассуждения
- Полные листинги кода
- Содержимое файлов
```

---

## 6. CREDENTIALS.md

### Шаблон

```markdown
# CREDENTIALS — [НАЗВАНИЕ ПРОЕКТА]

## ВСЕ ДОСТУПЫ ПРОЕКТА

**ВНИМАНИЕ:** Этот файл НЕ коммитится в git.
Добавлен в .gitignore. Хранится только локально.

---

## Серверы

| Окружение | IP / Host | User | SSH Key | Port |
|-----------|----------|------|---------|------|
| Development | | | | |
| Staging | | | | |
| Production | | | | |

## База данных

| Окружение | Host | Port | Database | User | Password |
|-----------|------|------|----------|------|----------|
| Development | localhost | 5432 | | | |
| Staging | | | | | |
| Production | | | | | |

## API-ключи

| Сервис | Ключ (test) | Ключ (live) | Webhook Secret |
|--------|------------|------------|----------------|
| Stripe | | | |
| [другие] | | | |

## Авторизация

| Параметр | Development | Staging | Production |
|----------|------------|---------|------------|
| JWT Access Secret | | | |
| JWT Refresh Secret | | | |

## Внешние сервисы

| Сервис | Логин | Пароль/Токен | URL |
|--------|-------|-------------|-----|
| [сервис] | | | |

## Мониторинг

| Сервис | URL | Логин | Пароль |
|--------|-----|-------|--------|
| Grafana | | | |
| Sentry DSN | | | |

## Домены

| Домен | DNS-провайдер | SSL | Expires |
|-------|-------------|-----|---------|
| | | | |
```

### Правила (вставить в CLAUDE.md)

```markdown
## ПОЛИТИКА CREDENTIALS

1. CREDENTIALS.md — единое хранилище всех доступов
2. Каждый новый ключ, пароль, токен НЕМЕДЛЕННО
   записывается в этот файл
3. Файл НЕ коммитится в git (в .gitignore)
4. Для production: environment variables, Docker Secrets или SOPS
5. Ответственные за обновление:
   - Серверы, CI/CD, мониторинг: #6 SRE
   - API-ключи, платежи: #5 Backend
   - Сторы: #4 Mobile
   - Тестовые аккаунты: #7 QA
```

---

## 7. ROADMAP.md

### Принцип

ROADMAP создаётся тремя специалистами параллельно:
- **#8 Engineering Manager** — структура спринтов, зависимости, риски
- **#5 Principal Backend Engineer** — техническая декомпозиция
- **#1 Product Architect** — бизнес-приоритеты, критический путь

### Шаблон структуры

```markdown
# ROADMAP — [НАЗВАНИЕ ПРОЕКТА]

## Версия: 1.0
## Период: [дата начала] — [дата конца]
## Спринты: [N] (по 2 недели)

---

## Обзор фаз

| Фаза | Название | Спринты | Результат |
|------|---------|---------|-----------|
| 0 | Foundation | S0 | Инфраструктура, CI/CD, базовые модули |
| 1 | Core MVP | S1-S3 | Основной функционал |
| 2 | Extended | S4-S6 | Расширенные фичи |
| 3 | Polish | S7-S8 | Тестирование, оптимизация |
| 4 | Launch | S9 | Релиз |

---

## Sprint 0 — Foundation (2 недели)

### Цели
- [ ] Инфраструктура: Docker, CI/CD, мониторинг
- [ ] БД: миграции, seed-данные
- [ ] Auth: базовая авторизация

### Задачи

| # | Задача | Исполнитель | Зависимости | DoD |
|---|--------|------------|-------------|-----|
| 1 | [задача] | #N | — | [критерий готовности] |

### Риски
- [риск и митигация]

### Definition of Done (спринт)
- [ ] Все задачи выполнены
- [ ] Тесты проходят
- [ ] Code review пройден
- [ ] DEVLOG обновлён

---

## Sprint 1 — [название] (2 недели)
[тот же формат]

---

## Критический путь

[какие задачи блокируют другие, что нельзя параллелить]

---

## Внешние зависимости

| Что | Когда нужно | Кто отвечает | Статус |
|-----|------------|-------------|--------|
| [например: аккаунт Stripe] | Sprint 2 | #5 | pending |
```

---

## 8. USER_PERSONAS.md

### Суть

Тестовая группа из 8-12 виртуальных пользователей. Каждая персона — конкретный человек с именем, возрастом, профессией, уровнем технической грамотности, потребностями и болями. Используется для проверки UX-решений на каждом milestone.

### Шаблон

```markdown
# USER PERSONAS — [НАЗВАНИЕ ПРОЕКТА]

## Тестовая группа пользователей

**Версия:** 1.0
**Управляет:** #9 UX Research Lead (или #2 UX/UI)
**Количество персон:** [8-12]
**Обновление:** при каждом значимом UX-решении

---

## Принцип формирования

Персоны покрывают:
- Разные возрастные группы (18-70)
- Разный уровень технической грамотности (2-10/10)
- Разные устройства (iOS, Android, Desktop)
- Разные потребности и контексты использования
- Accessibility-потребности (зрение, моторика)
- Разные языки/культуры (если международный продукт)

---

## Персона #1: [Имя]

| Параметр | Значение |
|----------|---------|
| **Возраст** | [N] лет |
| **Профессия** | [профессия] |
| **Город** | [город] |
| **Устройство** | [iPhone 15 / Samsung S24 / Desktop] |
| **Tech-уровень** | [N]/10 |
| **Языки** | [какие] |
| **Accessibility** | [если есть особенности] |

**Контекст использования:** [когда и зачем использует продукт]
**Главная боль:** [что раздражает / чего не хватает]
**Что важно:** [приоритеты при выборе продукта]
**Цитата:** «[типичная фраза этого пользователя]»

---

[повторить для каждой персоны]
```

### Как использовать персоны

1. **При проектировании экранов:** "Как Persona #3 (68 лет, tech 3/10) пройдёт этот flow?"
2. **При выборе фичей:** "Какие 3 персоны получат больше всего value?"
3. **При тестировании:** "Прогнать сценарий от лица каждой персоны"
4. **При приоритизации:** "Для скольких персон это критично?"

---

## 9. Чеклисты спринтов

### Шаблон SPRINT_CHECKLIST.md

```markdown
# Sprint [N] Checklist — [НАЗВАНИЕ ПРОЕКТА]

## Период: [дата — дата]
## Статус: in progress | completed

---

## Блокеры (решить ДО начала работы)

| # | Блокер | Ответственный | Статус |
|---|--------|-------------|--------|
| 1 | [блокер] | #N | DONE / IN PROGRESS / BLOCKED |

## Задачи спринта

| # | Задача | Исполнитель | Приоритет | Статус |
|---|--------|------------|-----------|--------|
| 1 | [задача] | #N | P0/P1/P2 | DONE / IN PROGRESS |

## Отложенные (DEFERRED)

| # | Задача | Причина | Перенесено в |
|---|--------|--------|-------------|
| 1 | [задача] | [почему отложена] | Sprint N+1 |

## Definition of Done

- [ ] Все P0 задачи выполнены
- [ ] Все P1 задачи выполнены или обоснованно перенесены
- [ ] Тесты проходят
- [ ] DEVLOG обновлён
- [ ] Код отревьюен
```

---

## 10. Правила разработки

### Вставить в CLAUDE.md

```markdown
## ПРАВИЛА РАЗРАБОТКИ

### Код
- TypeScript strict mode везде
- Без `any` — типы, интерфейсы, generics
- Коммиты: Conventional Commits (feat:, fix:, refactor:, test:, docs:, chore:)
- Ветвление: main (production), develop, feature/*, fix/*, release/*

### Тестирование
- Unit-тесты на бизнес-логику: обязательно
- Integration-тесты на API: обязательно для критичных модулей
- Перед мержем: все тесты должны проходить

### Безопасность
- Все входные данные валидируются
- Секреты — только через environment variables
- CORS: whitelist доменов
- Rate limiting на API
```

---

## Как применить к существующему проекту

### Пошаговая инструкция

**Шаг 1.** Скопируй этот файл в корень проекта

**Шаг 2.** Открой Claude Code в проекте и напиши:

```
Прочитай файл CLAUDE_CODE_PLAYBOOK.md.
Это методология работы, которую мы используем.

Твоя задача: применить эту методологию к текущему проекту.

1. Создай CLAUDE.md на основе шаблона из playbook,
   адаптировав под этот проект
2. Создай TEAM.md — определи какие специалисты нужны
   для ЭТОГО проекта, опиши каждого по шаблону
3. Создай DEVLOG.md, сделай ретроспективную запись S001
   о текущем состоянии проекта
4. Создай CREDENTIALS.md (шаблон)
5. Создай USER_PERSONAS.md для целевой аудитории этого продукта

Все документы должны быть заточены под конкретику
этого проекта, а не общими шаблонами.
```

**Шаг 3.** После создания документов:

```
Прочитай CLAUDE.md, TEAM.md и текущий код проекта.
Создай ROADMAP.md — план спринтов для достижения
[следующей цели проекта].
```

**Шаг 4.** Начинай работать по методологии:

```
[описание задачи]
```

Claude автоматически:
- Прочитает CLAUDE.md (загружается автоматически)
- Определит специалиста из TEAM.md
- Формализует задачу по протоколу
- Выполнит работу
- Обновит DEVLOG

---

## Частые ошибки

| Ошибка | Как правильно |
|--------|--------------|
| Не создали TEAM.md | Агенты работают как «абстрактные помощники» → низкое качество |
| CLAUDE.md слишком длинный | Держи до 200 строк. Детали — в отдельных файлах |
| Не ведут DEVLOG | Через 3 сессии никто не помнит что было сделано |
| Персоны без конкретики | «Молодой пользователь» — плохо. «Лена, 24, UX-дизайнер, iPhone 15, tech 9/10» — хорошо |
| Нет протокола формализации | Задачи выполняются «как понял» → scope creep, переделки |
| CREDENTIALS не в .gitignore | Утечка секретов в git |
| ROADMAP без DoD | Непонятно когда спринт закончен |

---

## Резюме

Минимальный набор для старта:

1. **CLAUDE.md** — правила (загружается автоматически)
2. **TEAM.md** — кто работает
3. **DEVLOG.md** — что сделано
4. **CREDENTIALS.md** — доступы (не в git)

Расширенный набор:

5. **ROADMAP.md** — куда идём
6. **USER_PERSONAS.md** — для кого строим
7. **SPRINT_CHECKLIST.md** — что сейчас делаем

Принципы:
- **Каждая задача = конкретный специалист** (не абстрактный помощник)
- **Каждый запрос = техническая спецификация** (не «сделай как-нибудь»)
- **Каждая сессия = запись в DEVLOG** (ничего не теряется)
- **Каждый секрет = строка в CREDENTIALS.md** (всё в одном месте)

---

*Playbook v1.0 — создан на основе практического опыта проекта RMS, февраль 2026*
